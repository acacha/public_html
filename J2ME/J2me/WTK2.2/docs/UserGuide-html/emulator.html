<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Professional Edition 7.0.6.1058" />
    <meta name="TEMPLATEBASE" content="book-w-index" />
    <meta name="LASTUPDATED" content="10/27/04 10:15:16" />
    <title>Using the Emulator</title>
    <link rel="StyleSheet" href="document.css" type="text/css" />
    <link rel="StyleSheet" href="catalog.css" type="text/css" />
    <link rel="Table of Contents" href="index.html" />
    <link rel="Previous" href="projects.html" />
    <link rel="Next" href="monitoring.html" />
    <link rel="Index" href="indexa.html" />
  </head>

  <body>

    <table class="full-width" id="SummaryNotReq1"
        cellspacing="0" cellpadding="0" border="0">
	  <!-- formatting table -->
      <tr><td class="sun-darkblue">&#160;</td></tr>
      <tr><td class="sun-lightblue">&#160;</td></tr>
    </table>
    
    <table class="full-width" id="SummaryNotReq2"
        cellspacing="0" cellpadding="0" border="0">
	  <!-- formatting table -->
      <tr>
        <td class="go-left">
          <p class="nav-link">
            <a accesskey="h" href="../../index.html">Documentation Home</a>
            &gt;
            <a accesskey="c" href="index.html"><i>User's Guide</i></a>
            &gt;
            Using the Emulator
          </p>
        </td>
        <td class="go-right">
        <a accesskey="c" href="index.html">
          <img id="LongDescNotReq1" src="images/toc.gif" border="0"
            alt="Contents" /></a>
	<a accesskey="p" href="projects.html">
	  <img id="LongDescNotReq2" src="images/prev.gif" border="0"
            alt="Previous" /></a>
        <a accesskey="n" href="monitoring.html">
	  <img id="LongDescNotReq3" src="images/next.gif" border="0"
            alt="Next" /></a>
        <a accesskey="i" href="indexa.html">
	  <img id="LongDescNotReq4" src="images/index.gif" border="0"
            alt="Index" /></a>
        </td>
      </tr>
    </table>

<a name="wp46228"> </a><h2 class="pChapNum">
Chapter &#160; 4
</h2>
<a name="wp41655"> </a><h2 class="pTitle">
Using the Emulator
</h2>
<hr />
<a name="wp41642"> </a><p class="pBody">
The J2ME Wireless Toolkit emulator simulates a MIDP device on your desktop computer. It is a convenient way to see how your application performs in a MIDP environment and gives you a tight development cycle that is entirely contained on your desktop computer.
</p>
<a name="wp36983"> </a><p class="pBody">
The emulator does not represent a specific device, but it provides correct implementations of its supported APIs.
</p>
<a name="wp36935"> </a><h2 class="pHeading1">
4.1	Emulator Skins
</h2>
<a name="wp36941"> </a><p class="pBody">
A <em class="cEmphasis">skin</em> is a thin layer on top of the emulator implementation that provides it with a certain appearance, screen characteristics, and input controls. The J2ME Wireless Toolkit comes with skins that represent different kinds of devices.</p><div align="left">
<table border="0" cellpadding="7" summary="Emualtor skins" id="wp37032">
  <caption><a name="wp37032"> </a><div class="pTableCaption">
TABLE&#160;3&#160;&#160;&#8211;&#160;&#160;Emulator skins
</div>
</caption>
<thead>
<tr >    <th  class="sun-verylightblue" scope="col"><a name="wp37036"> </a><div class="pTableHead">
Name
</div>

</th>
    <th  class="sun-verylightblue" scope="col"><a name="wp37038"> </a><div class="pTableHead">
Screen size
</div>

</th>
    <th  class="sun-verylightblue" scope="col"><a name="wp37102"> </a><div class="pTableHead">
Canvas size
</div>

</th>
    <th  class="sun-verylightblue" scope="col"><a name="wp37067"> </a><div class="pTableHead">
Colors
</div>

</th>
    <th  class="sun-verylightblue" scope="col"><a name="wp37090"> </a><div class="pTableHead">
Input
</div>

</th>
</tr>
</thead>
  <tr>    <td><a name="wp37040"> </a><div class="pTableText">
DefaultColorPhone
</div>
</td>
    <td><a name="wp37042"> </a><div class="pTableText">
240 x 320
</div>
</td>
    <td><a name="wp37104"> </a><div class="pTableText">
240 x 289
</div>
</td>
    <td><a name="wp37069"> </a><div class="pTableText">
4096
</div>
</td>
    <td><a name="wp37092"> </a><div class="pTableText">
ITU-T
</div>
</td>
</tr>
  <tr>    <td><a name="wp37044"> </a><div class="pTableText">
DefaultGrayPhone
</div>
</td>
    <td><a name="wp37046"> </a><div class="pTableText">
180 x 208
</div>
</td>
    <td><a name="wp37106"> </a><div class="pTableText">
180 x 177
</div>
</td>
    <td><a name="wp37071"> </a><div class="pTableText">
4096
</div>
</td>
    <td><a name="wp37094"> </a><div class="pTableText">
ITU-T
</div>
</td>
</tr>
  <tr>    <td><a name="wp37048"> </a><div class="pTableText">
MediaControlSkin
</div>
</td>
    <td><a name="wp37050"> </a><div class="pTableText">
180 x 208
</div>
</td>
    <td><a name="wp37108"> </a><div class="pTableText">
180 x 177
</div>
</td>
    <td><a name="wp37073"> </a><div class="pTableText">
4096
</div>
</td>
    <td><a name="wp37096"> </a><div class="pTableText">
ITU-T
</div>
</td>
</tr>
  <tr>    <td><a name="wp37052"> </a><div class="pTableText">
QwertyDevice
</div>
</td>
    <td><a name="wp37054"> </a><div class="pTableText">
636 x 235
</div>
</td>
    <td><a name="wp37110"> </a><div class="pTableText">
540 x 204
</div>
</td>
    <td><a name="wp37075"> </a><div class="pTableText">
4096
</div>
</td>
    <td><a name="wp37098"> </a><div class="pTableText">
Qwerty
</div>
</td>
</tr>
<tr><td colspan="15"><hr class="pTableHr" /></td></tr>
</table>
</div>
<p class="pBody">

</p>
<a name="wp37116"> </a><p class="pBody">
You can create your own emulator skins if you wish. See the <em class="cEmphasis">Basic Customization Guide</em> for details.
</p>
<a name="wp37129"> </a><h2 class="pHeading1">
4.2	Using the Emulator
</h2>
<a name="wp37141"> </a><p class="pBody">
The emulator looks and acts like a mobile phone. In this section you&#8217;ll learn how to control the emulator. Although the description and figures are based on the DefaultColorPhone skin, all the skins operate in a similar way.
</p>
<a name="wp37144"> </a><div class="pFigureCaption">
FIGURE&#160;17&#160;&#160;&#8211;&#160;&#160;The DefaultColorPhone emulator skin
<br /><br />
</div><a name="wp46277"> </a><p class="pBody">
<img src="images/DefaultColorPhone-callouts.gif" alt="The DefaultColorPhone emulator skin" border="0" hspace="0" vspace="0"/>
</p>
<a name="wp41082"> </a><p class="pBody">
You can use the mouse to click on the buttons to press them. Most buttons also have keyboard shortcuts, which are generally easier to use. Keyboard numbers 0 through 9 correspond to the emulator&#8217;s 0 through 9 buttons. Some less obvious keyboard shortcuts are in the following table.</p><div align="left">
<table border="0" cellpadding="7" summary="Keyboard shortcuts" id="wp37160">
  <caption><a name="wp37160"> </a><div class="pTableCaption">
TABLE&#160;4&#160;&#160;&#8211;&#160;&#160;Keyboard shortcuts
</div>
</caption>
<thead>
<tr >    <th  class="sun-verylightblue" scope="col"><a name="wp37164"> </a><div class="pTableHead">
Emulator button
</div>

</th>
    <th  class="sun-verylightblue" scope="col"><a name="wp37166"> </a><div class="pTableHead">
Keyboard key
</div>

</th>
</tr>
</thead>
  <tr>    <td><a name="wp37168"> </a><div class="pTableText">
Left soft button
</div>
</td>
    <td><a name="wp37170"> </a><div class="pTableText">
F1
</div>
</td>
</tr>
  <tr>    <td><a name="wp37172"> </a><div class="pTableText">
Right soft button
</div>
</td>
    <td><a name="wp37174"> </a><div class="pTableText">
F2
</div>
</td>
</tr>
  <tr>    <td><a name="wp37176"> </a><div class="pTableText">
Power button
</div>
</td>
    <td><a name="wp37178"> </a><div class="pTableText">
Esc
</div>
</td>
</tr>
  <tr>    <td><a name="wp37180"> </a><div class="pTableText">
SELECT
</div>
</td>
    <td><a name="wp37182"> </a><div class="pTableText">
Enter
</div>
</td>
</tr>
<tr><td colspan="15"><hr class="pTableHr" /></td></tr>
</table>
</div>
<p class="pBody">

</p>
<a name="wp37792"> </a><p class="pBody">
Entering text works much as it does on many real devices. Press a number key multiple times to get the letter you want. For example, press the 5 key twice for the letter K. When you are entering text, the asterisk key (*) switches between upper case, lower case, numbers, and symbols. The indicator at the top of the screen shows your current mode. The pound key (#) enters a space.
</p>
<a name="wp37846"> </a><p class="pBody">
Alternately, you can just type on your keyboard to enter text. Although this is convenient for entering text, you must remember that it is a convenience your users will most likely be lacking.
</p>
<a name="wp37199"> </a><h2 class="pHeading1">
4.3	Setting Emulator Preferences
</h2>
<a name="wp37203"> </a><p class="pBody">
You can adjust the emulator settings to more closely resemble a specific device or to test your application under different resource conditions.
</p>
<a name="wp37208"> </a><h3 class="pHeading2">
4.3.1	Network Proxies
</h3>
<a name="wp37204"> </a><p class="pBody">
The emulator uses your desktop network connection. For example, if the emulator runs a MIDlet that makes an HTTP connection, the emulator attempts to make the HTTP connection using the desktop&#8217;s network setup.
</p>
<a name="wp37217"> </a><p class="pBody">
If your development computer is behind a firewall, you might use a proxy server to make HTTP connections. If you&#8217;re not sure, try examining your browser&#8217;s settings to see if it uses proxy servers.
</p>
<a name="wp37218"> </a><p class="pBody">
If you are using proxy servers, you need to configure the emulator to use the same proxy servers. To do this, choose <b class="cBold">Edit &gt; Preferences...</b>. On the <b class="cBold">Network Configuration</b> tab, fill in the names and port numbers for the proxy server you wish to use. You can also select which version of HTTP you wish to use.
</p>
<a name="wp37287"> </a><h3 class="pHeading2">
4.3.2	Heap Size
</h3>
<a name="wp37295"> </a><p class="pBody">
The <em class="cEmphasis">heap</em> is memory where your application&#8217;s objects are stored. Many real devices have limited heap size. You can set a maximum heap size to more closely simulate the conditions on a real device. Choose <b class="cBold">Edit &gt; Preferences...</b> from the KToolbar menu and selecting the <b class="cBold">Storage</b> tab. Fill in the maximum heap size in the <b class="cBold">Heap Size</b> field. Remember, one kilobyte (kB) is 1024 bytes.
</p>
<a name="wp40535"> </a><p class="pBody">
If you don&#8217;t specify a heap size, the default is 2 megabytes.
</p>
<a name="wp37321"> </a><div class="pFigureCaption">
FIGURE&#160;18&#160;&#160;&#8211;&#160;&#160;The storage tab of the KToolbar preferences
<br /><br />
</div><a name="wp46311"> </a><p class="pBody">
<img src="images/storage2.gif" alt="The storage tab of the KToolbar preferences" border="0" hspace="0" vspace="0"/>
</p>
<a name="wp43440"> </a><h3 class="pHeading2">
4.3.3	Storage and Cleaning
</h3>
<a name="wp37255"> </a><p class="pBody">
The emulator has persistent storage, which by default is placed in <em class="cEmphasis">{toolkit}</em><code class="cCode">\appdb\</code><em class="cEmphasis">{skin}</em> in files with a <code class="cCode">.db</code> extension. For example, the persistent storage for the <code class="cCode">DefaultColorPhone</code> emulator skin is stored in <em class="cEmphasis">{toolkit}</em><code class="cCode">\appdb\DefaultColorPhone</code>. There is no limit on the size of the persistent storage.
</p>
<hr class="pHr"/><div class="note">
<a name="wp43629"> </a>
<b>Note &#8211;</b>  If multiple instances of the same emulator skin run simultaneously, the J2ME Wireless Toolkit will generate unique file paths for each one. For example, a second instance of <code class="cCode">DefaultColorPhone</code> might have a file path name of <em class="cEmphasis">{toolkit}</em><code class="cCode">\appdb\DefaultColorPhone.1089982856218</code>.
<hr class="pHr"/></div>
<a name="wp37280"> </a><p class="pBody">
The toolkit enables you to choose a different location for the storage files, and you can limit the size of the storage. This is useful if you wish to test your application&#8217;s behavior when a small amount of persistent storage is available.
</p>
<a name="wp37281"> </a><p class="pBody">
To adjust the persistent storage settings, choose <b class="cBold">Edit &gt; Preferences...</b> and click on the <b class="cBold">Storage</b> tab. Enter the name of the directory you wish to use for persistent storage. You can only enter a relative path, and the directory you specify is created in the <em class="cEmphasis">{toolkit}</em><code class="cCode">\appdb</code> directory.
</p>
<a name="wp37342"> </a><p class="pBody">
If you wish, you can enter a limit in kilobytes for the size of the persistent storage. Bear in mind that the storage implementation has some overhead in addition to the space your application uses. For example, if you enter 8 kB for the persistent storage size, 8192 bytes is available for both your application data and the storage overhead.
</p>
<a name="wp37866"> </a><p class="pBody">
If you wish to erase the persistent storage of the emulator, choose <b class="cBold">File &gt; Utilities...</b> from the KToolbar menu. Click on the <b class="cBold">Clean Database</b> button to wipe the persistent storage clean.
</p>
<a name="wp37224"> </a><h3 class="pHeading2">
4.3.4	Adjusting Emulator Performance
</h3>
<a name="wp37355"> </a><p class="pBody">
The emulator uses many of the resources of your desktop computer, including its display and network connection. Compared to the desktop-based emulator, a real MIDP device usually has a slower processor, less memory, and a slower network connection, and might have a different type of display.
</p>
<a name="wp37381"> </a><p class="pBody">
The J2ME Wireless Toolkit allows you to simulate the constrained environment of a real device. Although the emulator does not represent a real device, adjusting the performance settings gives you useful information about how your application performs under varying runtime conditions.
</p>
<a name="wp37425"> </a><p class="pBody">
Choose <b class="cBold">Edit &gt; Preferences...</b> and click on the <b class="cBold">Performance</b> tab.
</p>
<a name="wp37395"> </a><div class="pFigureCaption">
FIGURE&#160;19&#160;&#160;&#8211;&#160;&#160;Adjusting the emulator&#8217;s performance
<br /><br />
</div><a name="wp46417"> </a><p class="pBody">
<img src="images/performance3.gif" alt="Adjusting the emulator&#8217;s performance" border="0" hspace="0" vspace="0"/>
</p>
<a name="wp37207"> </a><p class="pBody">
Adjust the <b class="cBold">Graphics primitives latency</b> to have an effect on the amount of time that elapses between your application&#8217;s calls to drawing methods in the <code class="cCode">Graphics</code> class and when the drawing actually takes place.
</p>
<a name="wp37423"> </a><p class="pBody">
To change the screen characteristics, choose one of the <b class="cBold">Display refresh</b> types. If you choose a <b class="cBold">Periodic</b> type, you will also need to specify the <b class="cBold">Refresh Rate</b>.
</p>
<a name="wp37424"> </a><p class="pBody">
To simulate the slower speed of a real device, check <b class="cBold">Enable VM speed emulation</b> and choose the speed you want. 
</p>
<a name="wp37360"> </a><p class="pBody">
You can adjust the simulated network speed by checking <b class="cBold">Enable network throughput emulation</b> and choosing a speed.
</p>
<a name="wp37426"> </a><h2 class="pHeading1">
4.4	Pausing and Resuming
</h2>
<a name="wp37430"> </a><p class="pBody">
MIDlets have a life cycle that is defined by the MIDP specification. MIDlets can be started and stopped by the device. Furthermore, external events like incoming phone calls can cause the device to pause a MIDlet.
</p>
<a name="wp37450"> </a><p class="pBody">
The emulator provides a simple mechanism to pause and resume running MIDlets. This is very helpful for testing your application&#8217;s behavior when it is paused.
</p>
<a name="wp37451"> </a><p class="pBody">
When the emulator is running, choose <b class="cBold">MIDlet &gt; Pause </b>from the emulator window&#8217;s menu. The running MIDlet is paused and the screen displays an &#8220;Incoming Call...&#8221; message.
</p>
<a name="wp37455"> </a><p class="pBody">
To resume the MIDlet&#8217;s operation, choose <b class="cBold">MIDlet &gt; Resume </b>from the menu.
</p>
<a name="wp37478"> </a><h2 class="pHeading1">
4.5	Running the Emulator Solo
</h2>
<a name="wp37664"> </a><p class="pBody">
During development, you will most often run the emulator directly from KToolbar by pressing the <b class="cBold">Run</b> button or using the <b class="cBold">Project &gt; Run via OTA</b> feature. For testing or demonstrations, you might wish to run the emulator by itself. Several different approaches are described in this section. The program group created by the J2ME Wireless Toolkit installer includes several items that pertain to running the emulator by itself.
</p>
<a name="wp37689"> </a><p class="pBody">
To run an application directly, which is analagous to pressing KToolbar&#8217;s <b class="cBold">Run</b> button, choose the <b class="cBold">Run MIDP Application...</b> item. The toolkit prompts you to locate a MIDlet descriptor file on your local disk. Note that the corresponding MIDlet suite JAR must also be present.
</p>
<a name="wp37695"> </a><p class="pBody">
To run the emulator&#8217;s Application Management Software (AMS), choose the <b class="cBold">OTA Provisioning</b> item, which is roughly analagous to KToolbar&#8217;s <b class="cBold">Run via OTA</b> feature. The emulator pops up with the AMS welcome screen, and you can install applications by typing in a URL.
</p>
<a name="wp37710"> </a><p class="pBody">
To change the emulator&#8217;s preferences, choose the <b class="cBold">Preferences</b> item from the toolkit program group. This pulls up the same preferences window as choosing <b class="cBold">Edit &gt; Preferences...</b> from the KToolbar menu.
</p>
<a name="wp37723"> </a><p class="pBody">
The J2ME Wireless Toolkit utilities are also accessible without running KToolbar. Just choose the <b class="cBold">Utilities</b> item.
</p>
<a name="wp37722"> </a><p class="pBody">
Finally, you can change which emulator skin is used by default. Choose the <b class="cBold">Default Device Selection</b> item, and choose one of the available emulator skins. Next time you launch the emulator the selected skin is used.
</p>
<a name="wp37737"> </a><p class="pBody">
You can also run the emulator from a command prompt. See <a  href="commandline.html#wp32207"><span class="cZ_Xref">Appendix&#160;B,  </span>&#8220;Command Line Reference</a>,&#8221; for more information.
</p>
<a name="wp46490"> </a><h2 class="pHeading1">
4.6	Using Third Party Emulators
</h2>
<a name="wp46491"> </a><p class="pBody">
Third party companies, like device manufacturers and wireless carriers, sometimes create device emulators that are compatible with the J2ME Wireless Toolkit. You can gain experience running your application on a wider variety of implementations by installing additional emulators into the toolkit. The procedure is usually to unpack or install the third party emulator, then copy its directory into the <code class="cCode">&lt;toolkit&gt;/wtklib/devices</code> directory. Next time you run KToolbar, the emulator is available.
</p>
<a name="wp46495"> </a><p class="pBody">
A partial listing of some of the currently available emulators is available here:
</p>
<a name="wp46496"> </a><p class="pBody">
http://developers.sun.com/techtopics/mobility/midp/articles/emulators/
</p>
<a name="wp41235"> </a><p class="pBody">

</p>

    <p>&#160;</p>
    <hr class="pHr" />

    <table class="full-width" id="SummaryNotReq3">
	  <!-- formatting table -->
      <tr>
        <td class="go-left">
          <a accesskey="c" href="index.html">
            <img id="LongDescNotReq1" src="images/toc.gif" border="0"
              alt="Contents" /></a>
          <a accesskey="p" href="projects.html">
            <img id="LongDescNotReq2" src="images/prev.gif" border="0"
              alt="Previous" /></a>
          <a accesskey="n" href="monitoring.html">
            <img id="LongDescNotReq3" src="images/next.gif" border="0"
              alt="Next" /></a>
          <a accesskey="i" href="indexa.html">
            <img id="LongDescNotReq4" src="images/index.gif" border="0"
              alt="Index" /></a>
        </td>
        <td class="go-right">
          <span class="copyright">J2ME Wireless Toolkit User's Guide <br /> J2ME Wireless Toolkit 2.2</span>
        </td>
      </tr>
    </table>

    <p>&#160;</p>
    <p class="copyright">
      <a href="copyright.html">Copyright</a> &#169; 2004 Sun Microsystems, Inc. 
      All rights reserved.
      Use is subject to the <a href="../../BinaryLicense.html">license terms</a>.
    </p>
  </body>
</html>
